<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CBP Request for Development Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'cbp-blue': '#1f3a8c',
                        'cbp-dark-blue': '#1e293b',
                        'cbp-light-blue': '#3b82f6',
                        'cbp-red': '#dc2626',
                        'cbp-gold': '#fbbf24',
                        'cbp-gray': '#6b7280',
                        'cbp-light-gray': '#f3f4f6'
                    }
                }
            }
        }
    </script>
    <style>
        .cbp-header {
            background: linear-gradient(135deg, #1f3a8c 0%, #1e293b 100%);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .cbp-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #1f3a8c;
        }
        .cbp-table {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        .cbp-status-new { background-color: #dbeafe; color: #1e40af; border-color: #3b82f6; }
        .cbp-status-progress { background-color: #fef3c7; color: #92400e; border-color: #f59e0b; }
        .cbp-status-waiting { background-color: #fef2f2; color: #991b1b; border-color: #ef4444; }
        .cbp-status-approved { background-color: #dcfce7; color: #166534; border-color: #22c55e; }
        .cbp-status-closed { background-color: #f3f4f6; color: #374151; border-color: #6b7280; }
        .cbp-priority-high { color: #dc2626; font-weight: 600; }
        .cbp-priority-medium { color: #d97706; font-weight: 500; }
        .cbp-priority-low { color: #059669; font-weight: 400; }
        .cbp-kanban-column { background: #f8fafc; border-radius: 8px; min-height: 500px; }
        .cbp-kanban-card {
            background: white;
            border-radius: 6px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border-left: 3px solid #1f3a8c;
            transition: all 0.2s;
        }
        .cbp-kanban-card:hover {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.15);
            transform: translateY(-1px);
        }
        .cbp-metric-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.2s;
        }
        .cbp-metric-card:hover { box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); }
        .cbp-btn-primary {
            background: linear-gradient(135deg, #1f3a8c 0%, #3b82f6 100%);
            color: white;
            border: none;
            transition: all 0.2s;
        }
        .cbp-btn-primary:hover {
            background: linear-gradient(135deg, #1e293b 0%, #1f3a8c 100%);
            transform: translateY(-1px);
        }
        .cbp-logo { height: 40px; width: auto; }
        .cbp-notification { animation: slideInDown 0.3s ease-out; }
        @keyframes slideInDown {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        .hidden { display: none !important; }
    </style>
</head>
<body class="bg-gray-50">
    <div class="min-h-screen">
        <!-- CBP Header -->
        <header class="cbp-header">
            <div class="container mx-auto px-6 py-4">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-4">
                        <img src="cbp-logo.jpg" alt="CBP Logo" class="cbp-logo rounded-full" />
                        <div>
                            <h1 class="text-2xl font-bold text-white">CBP Request for Development Dashboard</h1>
                            <p class="text-blue-200">U.S. Customs and Border Protection</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button class="cbp-btn-primary px-4 py-2 rounded-lg font-medium">
                            ‚ûï Submit RFD
                        </button>
                        <div class="text-white text-sm">
                            <div>Welcome, Agent Smith</div>
                            <div class="text-blue-200">Last login: Today 09:15 AM</div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Notifications -->
        <div id="notifications" class="bg-yellow-50 border-l-4 border-yellow-400 p-4 cbp-notification">
            <div class="container mx-auto px-6">
                <div class="flex items-center justify-between py-1">
                    <div class="flex items-center">
                        <span class="text-yellow-600 mr-2">‚ö†Ô∏è</span>
                        <span class="text-sm font-medium">3 RFDs are overdue and require immediate attention</span>
                    </div>
                    <button onclick="dismissNotification()" class="text-gray-400 hover:text-gray-600">‚úï</button>
                </div>
                <div class="flex items-center justify-between py-1">
                    <div class="flex items-center">
                        <span class="text-blue-600 mr-2">‚ÑπÔ∏è</span>
                        <span class="text-sm font-medium">2 new Request for Development submissions in the last hour</span>
                    </div>
                    <button onclick="dismissNotification()" class="text-gray-400 hover:text-gray-600">‚úï</button>
                </div>
            </div>
        </div>

        <div class="container mx-auto px-6 py-8">
            <!-- Metrics Cards -->
            <div class="grid grid-cols-1 md:grid-cols-5 gap-6 mb-8">
                <div class="cbp-metric-card p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600">Total RFDs</p>
                            <p class="text-3xl font-bold text-gray-900">6</p>
                        </div>
                        <div class="p-3 bg-blue-100 rounded-full">üìÑ</div>
                    </div>
                </div>
                <div class="cbp-metric-card p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600">Open RFDs</p>
                            <p class="text-3xl font-bold text-green-600">5</p>
                        </div>
                        <div class="p-3 bg-green-100 rounded-full">üïê</div>
                    </div>
                </div>
                <div class="cbp-metric-card p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600">Overdue</p>
                            <p class="text-3xl font-bold text-red-600">3</p>
                        </div>
                        <div class="p-3 bg-red-100 rounded-full">‚ö†Ô∏è</div>
                    </div>
                </div>
                <div class="cbp-metric-card p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600">This Week</p>
                            <p class="text-3xl font-bold text-blue-600">2</p>
                        </div>
                        <div class="p-3 bg-blue-100 rounded-full">üìÖ</div>
                    </div>
                </div>
                <div class="cbp-metric-card p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-sm font-medium text-gray-600">Avg. Resolution</p>
                            <p class="text-3xl font-bold text-purple-600">4.2 days</p>
                        </div>
                        <div class="p-3 bg-purple-100 rounded-full">üìä</div>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="bg-white rounded-lg shadow-sm p-6 mb-8">
                <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0">
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4">
                        <div class="relative">
                            <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">üîç</span>
                            <input type="text" id="search" placeholder="Search RFDs..." onkeyup="filterTable()" 
                                   class="pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-full sm:w-64" />
                        </div>
                        <select id="statusFilter" onchange="filterTable()" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="all">All Status</option>
                            <option value="New">New</option>
                            <option value="In Progress">In Progress</option>
                            <option value="Waiting/Blocked">Waiting/Blocked</option>
                            <option value="Approved">Approved</option>
                            <option value="Closed">Closed</option>
                        </select>
                        <select id="priorityFilter" onchange="filterTable()" class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                            <option value="all">All Priority</option>
                            <option value="High">High</option>
                            <option value="Medium">Medium</option>
                            <option value="Low">Low</option>
                        </select>
                    </div>
                    <div class="flex items-center space-x-4">
                        <div class="flex border border-gray-300 rounded-lg overflow-hidden">
                            <button id="tableViewBtn" onclick="switchView('table')" class="px-4 py-2 text-sm font-medium bg-blue-600 text-white">
                                üìã Table
                            </button>
                            <button id="kanbanViewBtn" onclick="switchView('kanban')" class="px-4 py-2 text-sm font-medium bg-white text-gray-700 hover:bg-gray-50">
                                üìä Kanban
                            </button>
                        </div>
                        <button onclick="exportCSV()" class="cbp-btn-primary px-4 py-2 rounded-lg font-medium text-sm">
                            ‚¨áÔ∏è Export CSV
                        </button>
                    </div>
                </div>
            </div>

            <!-- Table View -->
            <div id="tableView" class="cbp-table">
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">RFD ID</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Owner</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Submitted</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Due Date</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Priority</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Blockers</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="rfdTableBody" class="bg-white divide-y divide-gray-200">
                            <!-- Data will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Kanban View -->
            <div id="kanbanView" class="grid grid-cols-1 lg:grid-cols-5 gap-6 hidden">
                <div class="cbp-kanban-column p-4">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="font-semibold text-gray-900">New</h3>
                        <span id="newCount" class="text-sm text-gray-500 bg-gray-200 rounded-full px-2 py-1">0</span>
                    </div>
                    <div id="newColumn" class="space-y-3"></div>
                </div>
                <div class="cbp-kanban-column p-4">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="font-semibold text-gray-900">In Progress</h3>
                        <span id="progressCount" class="text-sm text-gray-500 bg-gray-200 rounded-full px-2 py-1">0</span>
                    </div>
                    <div id="progressColumn" class="space-y-3"></div>
                </div>
                <div class="cbp-kanban-column p-4">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="font-semibold text-gray-900">Waiting/Blocked</h3>
                        <span id="waitingCount" class="text-sm text-gray-500 bg-gray-200 rounded-full px-2 py-1">0</span>
                    </div>
                    <div id="waitingColumn" class="space-y-3"></div>
                </div>
                <div class="cbp-kanban-column p-4">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="font-semibold text-gray-900">Approved</h3>
                        <span id="approvedCount" class="text-sm text-gray-500 bg-gray-200 rounded-full px-2 py-1">0</span>
                    </div>
                    <div id="approvedColumn" class="space-y-3"></div>
                </div>
                <div class="cbp-kanban-column p-4">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="font-semibold text-gray-900">Closed</h3>
                        <span id="closedCount" class="text-sm text-gray-500 bg-gray-200 rounded-full px-2 py-1">0</span>
                    </div>
                    <div id="closedColumn" class="space-y-3"></div>
                </div>
            </div>
        </div>

        <!-- Modal -->
        <div id="modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 hidden">
            <div class="relative top-20 mx-auto p-5 border w-11/12 max-w-4xl shadow-lg rounded-md bg-white">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold text-gray-900">RFD Details</h2>
                    <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600">‚úï</button>
                </div>
                <div id="modalContent"></div>
                <div class="mt-6 flex justify-end space-x-3">
                    <button class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">Edit RFD</button>
                    <button class="px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">Add Comment</button>
                    <button class="cbp-btn-primary px-4 py-2 rounded-md text-sm font-medium">Update Status</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // RFD Data
        const rfds = [
            {
                id: "RFD-2025-001",
                title: "Border Security Enhancement System",
                status: "In Progress",
                owner: "Sarah Johnson",
                submittedDate: "08/10/2025",
                dueDate: "08/20/2025",
                priority: "High",
                blockers: ["Legal Review"],
                description: "Implement advanced biometric scanning system for high-volume border crossings",
                isOverdue: false
            },
            {
                id: "RFD-2025-002",
                title: "Trade Compliance Dashboard V2",
                status: "New",
                owner: "Michael Chen",
                submittedDate: "08/12/2025",
                dueDate: "08/25/2025",
                priority: "Medium",
                blockers: [],
                description: "Upgrade existing trade compliance monitoring dashboard with real-time analytics",
                isOverdue: false
            },
            {
                id: "RFD-2025-003",
                title: "Mobile Agent Communication Platform",
                status: "Waiting/Blocked",
                owner: "David Rodriguez",
                submittedDate: "08/05/2025",
                dueDate: "08/15/2025",
                priority: "High",
                blockers: ["Security Clearance", "Budget Approval"],
                description: "Secure mobile platform for field agent coordination and reporting",
                isOverdue: true
            },
            {
                id: "RFD-2025-004",
                title: "Cargo Manifest Processing Automation",
                status: "Approved",
                owner: "Lisa Wang",
                submittedDate: "08/08/2025",
                dueDate: "08/18/2025",
                priority: "Medium",
                blockers: [],
                description: "Automate cargo manifest validation and risk assessment procedures",
                isOverdue: false
            },
            {
                id: "RFD-2025-005",
                title: "Passport Verification API Integration",
                status: "Closed",
                owner: "James Thompson",
                submittedDate: "07/28/2025",
                dueDate: "08/10/2025",
                priority: "Low",
                blockers: [],
                description: "Integration with international passport verification databases",
                isOverdue: false
            },
            {
                id: "RFD-2025-006",
                title: "Traveler Risk Assessment Engine",
                status: "In Progress",
                owner: "Amanda Foster",
                submittedDate: "08/09/2025",
                dueDate: "08/22/2025",
                priority: "High",
                blockers: [],
                description: "AI-powered risk assessment for incoming travelers and cargo",
                isOverdue: false
            }
        ];

        let currentView = 'table';
        let filteredRfds = [...rfds];

        // Helper functions
        function getStatusClass(status) {
            const statusMap = {
                'New': 'cbp-status-new',
                'In Progress': 'cbp-status-progress',
                'Waiting/Blocked': 'cbp-status-waiting',
                'Approved': 'cbp-status-approved',
                'Closed': 'cbp-status-closed'
            };
            return statusMap[status] || 'cbp-status-new';
        }

        function getPriorityClass(priority) {
            const priorityMap = {
                'High': 'cbp-priority-high',
                'Medium': 'cbp-priority-medium',
                'Low': 'cbp-priority-low'
            };
            return priorityMap[priority] || 'cbp-priority-medium';
        }

        function getBlockersText(blockers) {
            return blockers.length === 0 ? 'None' : blockers.join(', ');
        }

        // Render functions
        function renderTable() {
            const tbody = document.getElementById('rfdTableBody');
            tbody.innerHTML = filteredRfds.map(rfd => `
                <tr class="hover:bg-gray-50 cursor-pointer" onclick="showRfdModal('${rfd.id}')">
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-blue-600">${rfd.id}</td>
                    <td class="px-6 py-4 text-sm text-gray-900">
                        <div class="max-w-xs truncate">${rfd.title}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${getStatusClass(rfd.status)}">
                            ${rfd.status}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${rfd.owner}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${rfd.submittedDate}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm ${rfd.isOverdue ? 'text-red-600 font-medium' : 'text-gray-900'}">
                        ${rfd.dueDate}
                        ${rfd.isOverdue ? '‚ö†Ô∏è' : ''}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm ${getPriorityClass(rfd.priority)}">${rfd.priority}</td>
                    <td class="px-6 py-4 text-sm text-gray-900">
                        <div class="max-w-xs truncate">${getBlockersText(rfd.blockers)}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        <button class="text-blue-600 hover:text-blue-900 mr-3">üëÅÔ∏è</button>
                        <button class="text-gray-600 hover:text-gray-900">‚úèÔ∏è</button>
                    </td>
                </tr>
            `).join('');
        }

        function renderKanban() {
            const columns = ['New', 'In Progress', 'Waiting/Blocked', 'Approved', 'Closed'];
            const columnIds = ['newColumn', 'progressColumn', 'waitingColumn', 'approvedColumn', 'closedColumn'];
            const countIds = ['newCount', 'progressCount', 'waitingCount', 'approvedCount', 'closedCount'];

            columns.forEach((status, index) => {
                const statusRfds = filteredRfds.filter(rfd => rfd.status === status);
                const column = document.getElementById(columnIds[index]);
                const count = document.getElementById(countIds[index]);
                
                count.textContent = statusRfds.length;
                column.innerHTML = statusRfds.map(rfd => `
                    <div class="cbp-kanban-card p-4 cursor-pointer" onclick="showRfdModal('${rfd.id}')">
                        <div class="flex items-start justify-between mb-2">
                            <h4 class="text-sm font-medium text-gray-900 leading-tight">${rfd.title}</h4>
                            <span class="text-xs font-medium ${getPriorityClass(rfd.priority)}">${rfd.priority}</span>
                        </div>
                        <p class="text-xs text-gray-600 mb-3">${rfd.id}</p>
                        <div class="flex items-center justify-between text-xs text-gray-500">
                            <span>${rfd.owner}</span>
                            <span class="${rfd.isOverdue ? 'text-red-600 font-medium' : ''}">${rfd.dueDate}</span>
                        </div>
                        ${rfd.blockers.length > 0 ? `
                            <div class="mt-2 text-xs text-red-600">
                                ‚ö†Ô∏è Blockers: ${getBlockersText(rfd.blockers)}
                            </div>
                        ` : ''}
                    </div>
                `).join('');
            });
        }

        // Event handlers
        function switchView(view) {
            currentView = view;
            const tableView = document.getElementById('tableView');
            const kanbanView = document.getElementById('kanbanView');
            const tableBtn = document.getElementById('tableViewBtn');
            const kanbanBtn = document.getElementById('kanbanViewBtn');

            if (view === 'table') {
                tableView.classList.remove('hidden');
                kanbanView.classList.add('hidden');
                tableBtn.classList.add('bg-blue-600', 'text-white');
                tableBtn.classList.remove('bg-white', 'text-gray-700');
                kanbanBtn.classList.remove('bg-blue-600', 'text-white');
                kanbanBtn.classList.add('bg-white', 'text-gray-700');
                renderTable();
            } else {
                tableView.classList.add('hidden');
                kanbanView.classList.remove('hidden');
                kanbanBtn.classList.add('bg-blue-600', 'text-white');
                kanbanBtn.classList.remove('bg-white', 'text-gray-700');
                tableBtn.classList.remove('bg-blue-600', 'text-white');
                tableBtn.classList.add('bg-white', 'text-gray-700');
                renderKanban();
            }
        }

        function filterTable() {
            const search = document.getElementById('search').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value;
            const priorityFilter = document.getElementById('priorityFilter').value;

            filteredRfds = rfds.filter(rfd => {
                const matchesSearch = search === '' || 
                    rfd.title.toLowerCase().includes(search) ||
                    rfd.id.toLowerCase().includes(search) ||
                    rfd.owner.toLowerCase().includes(search);
                
                const matchesStatus = statusFilter === 'all' || rfd.status === statusFilter;
                const matchesPriority = priorityFilter === 'all' || rfd.priority === priorityFilter;

                return matchesSearch && matchesStatus && matchesPriority;
            });

            if (currentView === 'table') {
                renderTable();
            } else {
                renderKanban();
            }
        }

        function showRfdModal(id) {
            const rfd = rfds.find(r => r.id === id);
            if (!rfd) return;

            const modal = document.getElementById('modal');
            const content = document.getElementById('modalContent');
            
            content.innerHTML = `
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">RFD ID</label>
                            <p class="mt-1 text-lg font-semibold text-blue-600">${rfd.id}</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Title</label>
                            <p class="mt-1 text-gray-900">${rfd.title}</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Description</label>
                            <p class="mt-1 text-gray-700">${rfd.description}</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Owner/Stakeholder</label>
                            <p class="mt-1 text-gray-900">${rfd.owner}</p>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Status</label>
                            <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ${getStatusClass(rfd.status)}">
                                ${rfd.status}
                            </span>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Priority</label>
                            <p class="mt-1 font-medium ${getPriorityClass(rfd.priority)}">${rfd.priority}</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Submitted Date</label>
                            <p class="mt-1 text-gray-900">${rfd.submittedDate}</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Due Date</label>
                            <p class="mt-1 ${rfd.isOverdue ? 'text-red-600 font-medium' : 'text-gray-900'}">
                                ${rfd.dueDate}
                                ${rfd.isOverdue ? '‚ö†Ô∏è (OVERDUE)' : ''}
                            </p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700">Blockers</label>
                            ${rfd.blockers.length === 0 ? 
                                '<p class="mt-1 text-green-600">No current blockers</p>' : 
                                `<div class="mt-1 space-y-1">
                                    ${rfd.blockers.map(blocker => 
                                        `<span class="inline-block bg-red-100 text-red-800 text-xs px-2 py-1 rounded-full">${blocker}</span>`
                                    ).join('')}
                                </div>`
                            }
                        </div>
                    </div>
                </div>
                <div class="mt-8">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Audit Log & History</h3>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <div class="space-y-3">
                            <div class="flex items-center space-x-3">
                                <div class="flex-shrink-0 w-2 h-2 bg-blue-600 rounded-full"></div>
                                <div class="flex-1">
                                    <p class="text-sm text-gray-900">RFD submitted by ${rfd.owner}</p>
                                    <p class="text-xs text-gray-500">${rfd.submittedDate} at 09:15 AM</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="flex-shrink-0 w-2 h-2 bg-yellow-600 rounded-full"></div>
                                <div class="flex-1">
                                    <p class="text-sm text-gray-900">Status updated to "${rfd.status}"</p>
                                    <p class="text-xs text-gray-500">August 12, 2025 at 02:30 PM</p>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <div class="flex-shrink-0 w-2 h-2 bg-green-600 rounded-full"></div>
                                <div class="flex-1">
                                    <p class="text-sm text-gray-900">Initial security review completed</p>
                                    <p class="text-xs text-gray-500">August 11, 2025 at 11:45 AM</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            modal.classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('modal').classList.add('hidden');
        }

        function dismissNotification() {
            document.getElementById('notifications').style.display = 'none';
        }

        function exportCSV() {
            const csv = [
                ['RFD ID', 'Title', 'Status', 'Owner', 'Submitted Date', 'Due Date', 'Priority', 'Blockers'],
                ...filteredRfds.map(rfd => [
                    rfd.id,
                    rfd.title,
                    rfd.status,
                    rfd.owner,
                    rfd.submittedDate,
                    rfd.dueDate,
                    rfd.priority,
                    getBlockersText(rfd.blockers)
                ])
            ].map(row => row.join(',')).join('\n');

            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.style.display = 'none';
            a.href = url;
            a.download = 'cbp-rfd-dashboard.csv';
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
            alert('RFD data exported to CSV successfully');
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderTable();
        });

        // Close modal when clicking outside
        document.getElementById('modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
</body>
</html>
